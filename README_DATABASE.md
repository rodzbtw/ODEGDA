# Database Class - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üìã –û–≥–ª—è–¥

–ö–ª–∞—Å `Database` –Ω–∞–¥–∞—î —Å—Ç–∞—Ç–∏—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (SQLite –∞–±–æ MySQL), –≤–∫–ª—é—á–∞—é—á–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –§–∞–π–ª–∏:
- **`src/Classes/Database.php`** - –æ—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –∑ –º–µ—Ç–æ–¥–∞–º–∏
- **`src/Classes/DatabaseTest.php`** - —Ç–µ—Å—Ç–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
- **`pages/database-demo.php`** - –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## üìù –ú–µ—Ç–æ–¥–∏ –∫–ª–∞—Å—É

### 1. `getConnection(string $type = 'sqlite', ?array $config = null): PDO`

–°—Ç–≤–æ—Ä—é—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (SQLite –∞–±–æ MySQL).

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `$type` - —Ç–∏–ø –ë–î: 'sqlite' –∞–±–æ 'mysql' (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 'sqlite')
- `$config` - –º–∞—Å–∏–≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è MySQL (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

**–ü–æ–≤–µ—Ä—Ç–∞—î:** PDO –æ–±'—î–∫—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

**–ü—Ä–∏–∫–ª–∞–¥:**
```php
// SQLite
$pdo = Database::getConnection('sqlite');

// MySQL –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
$pdo = Database::getConnection('mysql', [
    'host' => 'localhost',
    'dbname' => 'mydb',
    'username' => 'root',
    'password' => 'password'
]);
```

### 2. `checkUser(string $username, string $password, string $dbType = 'sqlite'): array|false`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ —Ç–∞–±–ª–∏—Ü—ñ Users (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è).

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `$username` - —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `$password` - –ø–∞—Ä–æ–ª—å (plain text)
- `$dbType` - —Ç–∏–ø –ë–î (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 'sqlite')

**–ü–æ–≤–µ—Ä—Ç–∞—î:** –ú–∞—Å–∏–≤ –∑ –¥–∞–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ `false` —è–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ/–Ω–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å

**–ü—Ä–∏–∫–ª–∞–¥:**
```php
$user = Database::checkUser('admin', 'password123');
if ($user) {
    echo "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ: " . $user['username'];
}
```

### 3. `createUser(string $username, string $email, string $password, string $dbType = 'sqlite'): array|false`

–°—Ç–≤–æ—Ä—é—î –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ —Ç–∞–±–ª–∏—Ü—ñ Users (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è).

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `$username` - —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—É–Ω—ñ–∫–∞–ª—å–Ω–µ)
- `$email` - email (—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π)
- `$password` - –ø–∞—Ä–æ–ª—å (plain text, –±—É–¥–µ –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–π)
- `$dbType` - —Ç–∏–ø –ë–î (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 'sqlite')

**–ü–æ–≤–µ—Ä—Ç–∞—î:** –ú–∞—Å–∏–≤ –∑ –¥–∞–Ω–∏–º–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ `false` —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è —Å—Ç–≤–æ—Ä–∏—Ç–∏

**–ü—Ä–∏–∫–ª–∞–¥:**
```php
$user = Database::createUser('newuser', 'user@example.com', 'password123');
if ($user) {
    echo "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä–µ–Ω–æ: " . $user['username'];
}
```

### 4. `initUsersTable(PDO $pdo): bool`

–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î —Ç–∞–±–ª–∏—Ü—é Users —è–∫—â–æ –≤–æ–Ω–∞ –Ω–µ —ñ—Å–Ω—É—î.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `$pdo` - PDO –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

**–ü–æ–≤–µ—Ä—Ç–∞—î:** `true` —è–∫—â–æ —É—Å–ø—ñ—à–Ω–æ

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ Users

```sql
CREATE TABLE Users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,  -- SQLite
    -- id INT AUTO_INCREMENT PRIMARY KEY,  -- MySQL
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
)
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **PDO prepared statements** –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ SQL —ñ–Ω'—î–∫—Ü—ñ–π
- ‚úÖ –ü–∞—Ä–æ–ª—ñ —Ö–µ—à—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ **password_hash()** –∑ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º PASSWORD_DEFAULT
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤ —á–µ—Ä–µ–∑ **password_verify()**
- ‚úÖ –£–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å username —Ç–∞ email
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —á–µ—Ä–µ–∑ try-catch

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ß–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```
http://localhost:8000/database-demo
```

### –ü—Ä–æ–≥—Ä–∞–º–Ω–æ:
```php
require_once 'vendor/autoload.php';
require_once 'src/Classes/Database.php';

use Classes\Database;

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
$user = Database::createUser('testuser', 'test@example.com', 'password123');

// –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
$authUser = Database::checkUser('testuser', 'password123');
```

## üìä –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –ë–î

### SQLite
- –§–∞–π–ª –±–∞–∑–∏ –¥–∞–Ω–∏—Ö: `database.sqlite`
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### MySQL
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —á–µ—Ä–µ–∑ PDO
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–±–æ .env —Ñ–∞–π–ª
- –ü–æ—Ç—Ä—ñ–±–µ–Ω –∑–∞–ø—É—â–µ–Ω–∏–π MySQL —Å–µ—Ä–≤–µ—Ä

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MySQL —á–µ—Ä–µ–∑ .env

–î–æ–¥–∞–π—Ç–µ –≤ `.env` —Ñ–∞–π–ª:
```
DB_HOST=localhost
DB_NAME=odegda_db
DB_USER=root
DB_PASSWORD=your_password
DB_CHARSET=utf8mb4
```

## üìù PHPDoc

–í—Å—ñ –º–µ—Ç–æ–¥–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ –∑–≥—ñ–¥–Ω–æ –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º PHPDoc:
- `@param` - –æ–ø–∏—Å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- `@return` - –æ–ø–∏—Å –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è
- `@throws` - –º–æ–∂–ª–∏–≤—ñ –≤–∏–Ω—è—Ç–∫–∏
- `@example` - –ø—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## ‚úÖ –í–∏–º–æ–≥–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ

- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ –∫–ª–∞—Å Database –∑—ñ —Å—Ç–∞—Ç–∏—á–Ω–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ –ú–µ—Ç–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î (SQLite —Ç–∞ MySQL)
- ‚úÖ –ú–µ—Ç–æ–¥ SELECT –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ú–µ—Ç–æ–¥ INSERT –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ü–æ–≤–Ω–∞ PHPDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (—Ö–µ—à—É–≤–∞–Ω–Ω—è)
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL —ñ–Ω'—î–∫—Ü—ñ–π (prepared statements)

